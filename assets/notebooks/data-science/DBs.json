{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {
    "toc": "true"
   },
   "source": [
    " # Table of Contents\n",
    "<div class=\"toc\" style=\"margin-top: 1em;\"><ul class=\"toc-item\" id=\"toc-level0\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Что-такое-базы-данных?\" data-toc-modified-id=\"Что-такое-базы-данных?-1\"><span class=\"toc-item-num\">1&nbsp;&nbsp;</span>Что такое базы данных?</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Реляционные-базы-данных\" data-toc-modified-id=\"Реляционные-базы-данных-2\"><span class=\"toc-item-num\">2&nbsp;&nbsp;</span>Реляционные базы данных</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Преимущества\" data-toc-modified-id=\"Преимущества-2.1\"><span class=\"toc-item-num\">2.1&nbsp;&nbsp;</span>Преимущества</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Язык-SQL\" data-toc-modified-id=\"Язык-SQL-2.2\"><span class=\"toc-item-num\">2.2&nbsp;&nbsp;</span>Язык SQL</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Подъем\" data-toc-modified-id=\"Подъем-2.2.1\"><span class=\"toc-item-num\">2.2.1&nbsp;&nbsp;</span>Подъем</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Спад\" data-toc-modified-id=\"Спад-2.2.2\"><span class=\"toc-item-num\">2.2.2&nbsp;&nbsp;</span>Спад</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Возвращение\" data-toc-modified-id=\"Возвращение-2.2.3\"><span class=\"toc-item-num\">2.2.3&nbsp;&nbsp;</span>Возвращение</a></span></li></ul></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Связи\" data-toc-modified-id=\"Связи-2.3\"><span class=\"toc-item-num\">2.3&nbsp;&nbsp;</span>Связи</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Синтаксис\" data-toc-modified-id=\"Синтаксис-2.4\"><span class=\"toc-item-num\">2.4&nbsp;&nbsp;</span>Синтаксис</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#JOIN\" data-toc-modified-id=\"JOIN-2.4.1\"><span class=\"toc-item-num\">2.4.1&nbsp;&nbsp;</span><a href=\"https://ru.wikipedia.org/wiki/Join_(SQL)\" target=\"_blank\">JOIN</a></a></span></li></ul></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Проектирование\" data-toc-modified-id=\"Проектирование-2.5\"><span class=\"toc-item-num\">2.5&nbsp;&nbsp;</span>Проектирование</a></span></li></ul></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#NoSQL\" data-toc-modified-id=\"NoSQL-3\"><span class=\"toc-item-num\">3&nbsp;&nbsp;</span>NoSQL</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Характеристики\" data-toc-modified-id=\"Характеристики-3.1\"><span class=\"toc-item-num\">3.1&nbsp;&nbsp;</span>Характеристики</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Теорема-CAP\" data-toc-modified-id=\"Теорема-CAP-3.2\"><span class=\"toc-item-num\">3.2&nbsp;&nbsp;</span><a href=\"https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D0%BE%D1%80%D0%B5%D0%BC%D0%B0_CAP\" target=\"_blank\">Теорема CAP</a></a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Виды-БД-по-типам-данных\" data-toc-modified-id=\"Виды-БД-по-типам-данных-3.3\"><span class=\"toc-item-num\">3.3&nbsp;&nbsp;</span>Виды БД по типам данных</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Хранилище-пар-«ключ-значение»-(Redis,-Memcashed)\" data-toc-modified-id=\"Хранилище-пар-«ключ-значение»-(Redis,-Memcashed)-3.3.1\"><span class=\"toc-item-num\">3.3.1&nbsp;&nbsp;</span><strong>Хранилище пар «ключ-значение»</strong> (Redis, Memcashed)</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Документ-ориентированная-база-данных-(MongoDB)\" data-toc-modified-id=\"Документ-ориентированная-база-данных-(MongoDB)-3.3.2\"><span class=\"toc-item-num\">3.3.2&nbsp;&nbsp;</span><strong>Документ-ориентированная база данных</strong> (MongoDB)</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Колоночные-базы-данных-(HBase,-Cassandra,-Vertica)\" data-toc-modified-id=\"Колоночные-базы-данных-(HBase,-Cassandra,-Vertica)-3.3.3\"><span class=\"toc-item-num\">3.3.3&nbsp;&nbsp;</span><strong>Колоночные базы данных</strong> (HBase, Cassandra, Vertica)</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Графовые-базы-данных-(Neo4j)\" data-toc-modified-id=\"Графовые-базы-данных-(Neo4j)-3.3.4\"><span class=\"toc-item-num\">3.3.4&nbsp;&nbsp;</span>Графовые базы данных (Neo4j)</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Мультимодельные-базы-данных\" data-toc-modified-id=\"Мультимодельные-базы-данных-3.3.5\"><span class=\"toc-item-num\">3.3.5&nbsp;&nbsp;</span>Мультимодельные базы данных</a></span></li></ul></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Приемущества\" data-toc-modified-id=\"Приемущества-3.4\"><span class=\"toc-item-num\">3.4&nbsp;&nbsp;</span>Приемущества</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Недостатки\" data-toc-modified-id=\"Недостатки-3.5\"><span class=\"toc-item-num\">3.5&nbsp;&nbsp;</span>Недостатки</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Проектирование\" data-toc-modified-id=\"Проектирование-3.6\"><span class=\"toc-item-num\">3.6&nbsp;&nbsp;</span>Проектирование</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Когда-не-стоит-использовать\" data-toc-modified-id=\"Когда-не-стоит-использовать-3.7\"><span class=\"toc-item-num\">3.7&nbsp;&nbsp;</span>Когда не стоит использовать</a></span></li></ul></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Практика\" data-toc-modified-id=\"Практика-4\"><span class=\"toc-item-num\">4&nbsp;&nbsp;</span>Практика</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Создание-схемы-данных\" data-toc-modified-id=\"Создание-схемы-данных-4.1\"><span class=\"toc-item-num\">4.1&nbsp;&nbsp;</span>Создание схемы данных</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#SQLite\" data-toc-modified-id=\"SQLite-4.1.1\"><span class=\"toc-item-num\">4.1.1&nbsp;&nbsp;</span>SQLite</a></span></li></ul></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#MongoDB\" data-toc-modified-id=\"MongoDB-4.2\"><span class=\"toc-item-num\">4.2&nbsp;&nbsp;</span>MongoDB</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Pandas-DataFrame\" data-toc-modified-id=\"Pandas-DataFrame-4.3\"><span class=\"toc-item-num\">4.3&nbsp;&nbsp;</span>Pandas DataFrame</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Подключение-к-СУБД\" data-toc-modified-id=\"Подключение-к-СУБД-4.4\"><span class=\"toc-item-num\">4.4&nbsp;&nbsp;</span>Подключение к СУБД</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#SQLite\" data-toc-modified-id=\"SQLite-4.4.1\"><span class=\"toc-item-num\">4.4.1&nbsp;&nbsp;</span>SQLite</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#MongoDB\" data-toc-modified-id=\"MongoDB-4.4.2\"><span class=\"toc-item-num\">4.4.2&nbsp;&nbsp;</span>MongoDB</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Pandas-DataFrame\" data-toc-modified-id=\"Pandas-DataFrame-4.4.3\"><span class=\"toc-item-num\">4.4.3&nbsp;&nbsp;</span>Pandas DataFrame</a></span></li></ul></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Создание-выборки-данных\" data-toc-modified-id=\"Создание-выборки-данных-4.5\"><span class=\"toc-item-num\">4.5&nbsp;&nbsp;</span>Создание выборки данных</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#SQLite\" data-toc-modified-id=\"SQLite-4.5.1\"><span class=\"toc-item-num\">4.5.1&nbsp;&nbsp;</span>SQLite</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#MongoDB\" data-toc-modified-id=\"MongoDB-4.5.2\"><span class=\"toc-item-num\">4.5.2&nbsp;&nbsp;</span>MongoDB</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Pandas-DF\" data-toc-modified-id=\"Pandas-DF-4.5.3\"><span class=\"toc-item-num\">4.5.3&nbsp;&nbsp;</span>Pandas DF</a></span></li></ul></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Удаление-данных\" data-toc-modified-id=\"Удаление-данных-4.6\"><span class=\"toc-item-num\">4.6&nbsp;&nbsp;</span>Удаление данных</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#SQlite\" data-toc-modified-id=\"SQlite-4.6.1\"><span class=\"toc-item-num\">4.6.1&nbsp;&nbsp;</span>SQlite</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#MongoDB\" data-toc-modified-id=\"MongoDB-4.6.2\"><span class=\"toc-item-num\">4.6.2&nbsp;&nbsp;</span>MongoDB</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Pandas-DataFrame\" data-toc-modified-id=\"Pandas-DataFrame-4.6.3\"><span class=\"toc-item-num\">4.6.3&nbsp;&nbsp;</span>Pandas DataFrame</a></span></li></ul></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Изменение-данных\" data-toc-modified-id=\"Изменение-данных-4.7\"><span class=\"toc-item-num\">4.7&nbsp;&nbsp;</span>Изменение данных</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#SQlite\" data-toc-modified-id=\"SQlite-4.7.1\"><span class=\"toc-item-num\">4.7.1&nbsp;&nbsp;</span>SQlite</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#MongoDB\" data-toc-modified-id=\"MongoDB-4.7.2\"><span class=\"toc-item-num\">4.7.2&nbsp;&nbsp;</span>MongoDB</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Pandas-DataFrame\" data-toc-modified-id=\"Pandas-DataFrame-4.7.3\"><span class=\"toc-item-num\">4.7.3&nbsp;&nbsp;</span>Pandas DataFrame</a></span></li></ul></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Полнотекстовый-поиск\" data-toc-modified-id=\"Полнотекстовый-поиск-4.8\"><span class=\"toc-item-num\">4.8&nbsp;&nbsp;</span>Полнотекстовый поиск</a></span><ul class=\"toc-item\"><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#В-SQL\" data-toc-modified-id=\"В-SQL-4.8.1\"><span class=\"toc-item-num\">4.8.1&nbsp;&nbsp;</span>В SQL</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#В-MongoDB\" data-toc-modified-id=\"В-MongoDB-4.8.2\"><span class=\"toc-item-num\">4.8.2&nbsp;&nbsp;</span>В MongoDB</a></span></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#В-Pandas\" data-toc-modified-id=\"В-Pandas-4.8.3\"><span class=\"toc-item-num\">4.8.3&nbsp;&nbsp;</span>В Pandas</a></span></li></ul></li></ul></li><li><span><a href=\"http://localhost:8888/notebooks/2018-2019%20%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D1%80%D0%B5%D0%B4%D0%B0%D1%85/2_SQL_ethnicity/DBs.ipynb#Самостоятельная\" data-toc-modified-id=\"Самостоятельная-5\"><span class=\"toc-item-num\">5&nbsp;&nbsp;</span>Самостоятельная</a></span></li></ul></div>"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "* [SQL или NoSQL — вот в чём вопрос](https://habr.com/company/ruvds/blog/324936/)\n",
    "* [NoSQL – коротко о главном](https://habr.com/company/oleg-bunin/blog/319052/)\n",
    "\n",
    "\n",
    "# Что такое базы данных?\n",
    "[Как устроены базы данных](https://habr.com/company/oleg-bunin/blog/358984/)\n",
    "\n",
    "База данных - набор сведений, хранящихся некоторым упорядоченным способом. Можно сравнить базу данных со шкафом, в котором хранятся документы. Иными словами, база данных - это хранилище данных. Сами по себе базы данных не представляли бы интереса, если бы не было систем управления базами данных (СУБД).\n",
    "\n",
    "Система управления базами данных - это совокупность языковых и программных средств, которая осуществляет доступ к данным, позволяет их создавать, менять и удалять, обеспечивает безопасность данных и т.д. В общем СУБД - это система, позволяющая создавать базы данных и манипулировать сведениями из них. А осуществляет этот доступ к данным СУБД посредством специального языка - SQL.\n",
    "\n",
    "\n",
    "# Реляционные базы данных\n",
    "\n",
    "\n",
    "## Преимущества\n",
    "Если ваша организация не находится в стадии экспоненциального роста, вероятно, не найдётся убедительных причин использовать БД, которая позволяет достаточно вольно обращаться с типами данных и нацелена на обработку огромных объёмов информации.\n",
    "\n",
    "* Наличие чёткой структуры. \n",
    "* Соответствие базы данных требованиям [ACID](https://ru.wikipedia.org/wiki/ACID) (Atomicity, Consistency, Isolation, Durability — атомарность, непротиворечивость, изолированность, долговечность). Это позволяет уменьшить вероятность неожиданного поведения системы и обеспечить целостность базы данных. Достигается подобное путём жёсткого определения того, как именно транзакции взаимодействуют с базой данных. Это отличается от подхода, используемого в NoSQL-базах, которые ставят во главу угла гибкость и скорость, а не 100% целостность данных.\n",
    "\n",
    "Вот признаки проектов, для которых идеально подойдут SQL-базы:\n",
    "\n",
    "* Имеются логические требования к данным, которые могут быть определены заранее.\n",
    "* Очень важна целостность данных.\n",
    "* Нужна основанная на устоявшихся стандартах, хорошо зарекомендовавшая себя технология, используя которую можно рассчитывать на большой опыт разработчиков и техническую поддержку.\n",
    "\n",
    "## Язык SQL\n",
    "* [Нет, вам не нужно машинное обучение. Вам нужен SQL](https://habr.com/post/417581/)\n",
    "* [SQL — гибок или почему я боюсь NoSQL](https://habr.com/post/164361/)\n",
    "\n",
    "### Подъем\n",
    "\n",
    "Первая реляционная база данных родилась в подразделении IBM Research в начале 70-х гг. В то время языки запросов основывались на сложной математической логике и не менее сложной нотации. Два свежеиспеченных кандидата наук, Дональд Чемберлин и Раймонд Бойс, впечатлились реляционной моделью данных, но при этом увидели, что используемый язык запросов будет препятствовать ее распространению. Они решили разработать новый язык запросов, который, по их словам, будет [«более удобным для пользователей, не прошедших курс математики или компьютерного программирования»](https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=6359709).\n",
    "\n",
    "В результате появился SQL, впервые представленный миру в 1974 году, и в следующие несколько десятилетий он станет очень популярным. Поскольку в отрасли ПО обосновались реляционные базы данных (например, System R, Ingres, DB2, Oracle, SQL Server, PostgreSQL, MySQL и многие другие), SQL широко распространился как язык взаимодействия с БД и стал общепринятым в экосистеме, которая становилась все более конкурентной.\n",
    "\n",
    "### Спад\n",
    "* [Реляционные базы данных обречены?](https://habr.com/post/103021/)\n",
    "\n",
    "С ростом сети Интернет разработчики ПО обнаружили, что реляционные базы данных не могут справиться с такой нагрузкой. Затем два новых интернет-гиганта совершили прорыв — разработали собственные распределенные нереляционные системы, предназначенные для решения проблемы с возрастающими объемами данных: MapReduce (публикация 2004 г.) и Bigtable (публикация 2006 г.) от компании Google и Dynamo (публикация 2007 г.) от компании Amazon. Упав на благодатную почву, опубликованные статьи дали хороший урожай нереляционных баз данных: Hadoop (на основе статьи по MapReduce, 2006 г.), Cassandra (авторы вдохновлялись статьями по Bigtable и Dynamo, 2008 г.), MongoDB (2009 г.) и др. Новые системы были написаны преимущественно с чистого листа, поэтому они тоже не использовали SQL, что привело к росту «движения NoSQL».\n",
    "\n",
    "Творение компаний Google и Amazon распространилось, похоже, гораздо шире, чем предполагали сами авторы. И понятно, почему так случилось: NoSQL-системы были в новинку; они обещали масштабирование и мощь; казалось, что это — быстрый путь к успешной разработке. И тут начали вылезать проблемы.\n",
    "\n",
    "### Возвращение\n",
    "Вскоре разработчики обнаружили, что отсутствие SQL на самом деле существенно ограничивает. У каждой базы данных NoSQL был собственный уникальный язык запросов, а это означало следующее: нужно было изучать больше языков (и обучать своих коллег); подключать эти базы данных к приложениям было сложнее, что заставляло писать тонны неустойчивого связующего кода; отсутствие сторонней экосистемы — а значит, компаниям приходилось разрабатывать собственные инструменты для визуализации и работы с БД.\n",
    "\n",
    "Языки NoSQL только появились, поэтому их нельзя было назвать полными и завершенными: в реляционных БД, к примеру, многие годы работали над добавлением в SQL необходимых функций.\n",
    "\n",
    "Разработчики ПО стали понемногу начали возвращаться к SQL.\n",
    "\n",
    "\n",
    "# NoSQL\n",
    "[NoSQL – коротко о главном](https://habr.com/company/oleg-bunin/blog/319052/)\n",
    "[NoSQL базы данных: понимаем суть](https://habr.com/post/152477/)\n",
    "\n",
    "Термин NoSQL. Есть две трактовки: одна старая, другая новая. Оригинальная — это NoSQL, т.е., вообще, никакого SQL-а нет, а есть какой-то другой механизм, для работы с этой базой данных. И более новая трактовка — это «Not only SQL» — это не только SQL, т.е. может быть SQL, но есть что-то помимо.\n",
    "\n",
    "## Характеристики\n",
    "1. Не используется SQL (точнее, не использовался)\n",
    "2. Неструктурированные (schemaless)— в отдельной строке или документе можно добавить произвольное поле без предварительного декларативного изменения структуры всей таблицы. Таким образом, если появляется необходимость поменять модель данных, то единственное достаточное действие — отразить изменение в коде приложения.\n",
    "    * Приятное следствие отсутствия схемы — эффективность работы с разреженными (sparse) данными. Если в одном документе есть поле date_published, а во втором — нет, значит никакого пустого поля date_published для второго создано не будет.\n",
    "3. Представление данных в виде агрегатов (aggregates). В отличие от реляционной модели, которая сохраняет логическую бизнес-сущность приложения в различные физические таблицы в целях нормализации, NoSQL хранилища оперируют с этими сущностями как с целостными объектами.\n",
    "![](https://habrastorage.org/storage2/c1b/6c1/77c/c1b6c177c5a955b626b253af0be9cc18.jpg)\n",
    "4. Слабые ACID свойства. Долгое время консистентность (consistency) данных была “священной коровой” для архитекторов и разработчиков. Все реляционные базы обеспечивали тот или иной уровень изоляции — либо за счет блокировок при изменении и блокирующего чтения, либо за счет undo-логов. С приходом огромных массивов информации и распределенных систем стало ясно, что обеспечить для них транзакционность набора операций с одной стороны и получить высокую доступность и быстрое время отклика с другой — невозможно. Эти требования уже давно неактуальны. NoSQL БД заменили принцип consistency на [eventual consistency](https://habr.com/post/100891/) — в грубом переводе на русский это означает, если не было конфликтующих записей, то когда-нибудь попозже кластер придет в согласованное состояние, при этом не дается каких-то гарантий по конкретным промежуткам — когда-нибудь.\n",
    "5. Распределенные системы, без совместно используемых ресурсов (share nothing). Вертикальная масштабирумость.\n",
    "\n",
    "\n",
    "## [Теорема CAP](https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D0%BE%D1%80%D0%B5%D0%BC%D0%B0_CAP)\n",
    "Распределенная система не может одновременно обладать более чем двумя из следующих трех характеристик — это доступность (availability), согласованность (consistency) ~~и устойчивость к разрывам сети (partition tolerance)~~.\n",
    "\n",
    "\n",
    "## Виды БД по типам данных\n",
    "[Список NoSQL-БД](http://nosql-database.org/).\n",
    "Доступность — это если у нас есть распределенная система, и мы обращаемся на любой ее узел и гарантированно получаем ответ. Если мы запрашиваем какие-то данные, то можем получить устаревшие версии этих данных, но мы получим данные, а не ошибку, или мы могли бы не достучаться до этого сервера. Если мы получили данные, то система доступна.\n",
    "\n",
    "В противоположность этому система может быть согласована. Что означает согласованность? Если мы на одном узле записали какие-то данные и спустя некоторое время на другом узле пытаемся прочитать эти данные, если система согласована, мы получим новую версию данных, которую мы записали в другом месте.\n",
    "\n",
    "### **Хранилище пар «ключ-значение»** (Redis, Memcashed)\n",
    "Минимальный интерфейс для такой базы данных состоит всего из 3-х операций — get, set и delete.\n",
    "\n",
    "### **Документ-ориентированная база данных** (MongoDB)\n",
    "СУБД, специально предназначенная для хранения иерархических структур данных (документов). В основе документоориентированных СУБД лежат документные хранилища, имеющие структуру дерева. API для поиска позволяет находить по запросу документы и части документов. В отличие от хранилищ типа ключ-значение, выборка по запросу к документному хранилищу может содержать части большого количества документов без полной загрузки этих документов в оперативную память.\n",
    "\n",
    "### **Колоночные базы данных** (HBase, Cassandra, Vertica)\n",
    "Их сильная сторона в способности хранить большое количество данных с большим количеством атрибутов. Они немного по-другому хранят данные, нежели, например, реляционные базы данных — реляционки хранят по строкам, т.е. все атрибуты одной строки лежат рядом. Эти делают наоборот, они хранят отдельно колонки. Есть файл — в нем хранятся все поля данной колонки из всех 3-х млрд. записей, хранятся все рядом. Соответственно, другая колонка хранится в другом файле. За счет этого они могут применять улучшенное сжатие за счет использования информации о типе данных колонки. Также это может ускорять запросы, если, нам, например, нужны 3 колонки из 300, то нам не обязательно грузить остальные 297.\n",
    "\n",
    "### Графовые базы данных (Neo4j)\n",
    "Предназначены для обработки графов — набора вершин, соединенных ребрами. Например, социальные сети — это один большой граф. Дорожная сеть и прокладка маршрутов, рекомендация товаров.\n",
    "\n",
    "Сила этих баз данных в том, что за счет своей специализации они могут эффективно выполнять всякие операции над графами, но также в силу той же специализации они не сильно распространены.\n",
    "\n",
    "### Мультимодельные базы данных\n",
    "\n",
    "\n",
    "\n",
    "## Приемущества\n",
    "* Нереляционные базы лучше поддаются масштабированию, оно линейно. Линейная масштабируемость — это когда мы путем увеличения ресурсов кластера получаем пропорциональное увеличение характеристик кластера. Удвоили количество серверов — получили в два раза больше производительность:\n",
    "    * Н* Можно хранить большое количество данных\n",
    "    * Н* Высокая доступность — мы разносим нашу базу данных по нескольким датацентрам: в Америке, в Европе, Японии, если вдруг в какой-то из них бьет молния, и он исчезает, то мы можем писать в другие датацентры, и доступная база данных нам это позволит.\n",
    "* Во многих случаях позволяют разработчику отражать сущности предметной области на сущности БД без введения дополнительных сущностей, которые приходится вводить в реляционных СУБД.\n",
    "* Хранение больших объёмов **неструктурированной** информации. База данных NoSQL не накладывает ограничений на типы хранимых данных. Более того, при необходимости в процессе работы можно добавлять новые типы данных.\n",
    "* Быстрая разработка. NoSQL базы данных не нуждаются в том же объёме подготовительных действий, которые обычно нужны для реляционных баз.\n",
    "\n",
    "## Недостатки\n",
    "1. Накладные расходы в коде приложения при смене модели данных\n",
    "2. Отсутствие всевозможных ограничений со стороны базы (not null, unique, check constraint и т.д.)\n",
    "3. Сложности в понимании и контроле структуры данных при параллельной работе с базой разных проектов (отсутствуют какие-либо словари на стороне базы)\n",
    "4. Необходимость изучения нового api запросов для каждой новой СУБД (см. [Я не буду учить твой Garbage Query Language](https://habr.com/post/422667/))\n",
    "\n",
    "Вот свойства проектов, для которых подойдёт что-то из сферы NoSQL:\n",
    "\n",
    "* Требования к данным нечёткие, неопределённые, или развивающиеся с развитием проекта.\n",
    "* Цель проекта может корректироваться со временем, при этом важна возможность немедленного начала разработки.\n",
    "* Одни из основных требований к базе данных — скорость обработки данных и масштабируемость.\n",
    "\n",
    "## Проектирование\n",
    "Главное правило проектирования структуры данных в NoSQL базах — она должна подчиняться требованиям приложения и быть максимально оптимизированной под наиболее частые запросы. Если платежи регулярно извлекаются вместе с заказом — имеет смысл их включать в общий объект, если же многие запросы работают только с платежами — значит, лучше их вынести в отдельную сущность.\n",
    "## Когда не стоит использовать\n",
    "* [Почему вы никогда не должны использовать MongoDB](https://habr.com/post/231213/)\n",
    "* [Почему вы никогда не должны говорить «никогда»](https://habr.com/post/243431/)\n",
    "* [Почему SQL одерживает верх над NoSQL, и к чему это приведет в будущем](https://habr.com/company/alconost/blog/340372/)\n",
    "\n",
    "* Когда ваши данные по своей природе реляционны.\n",
    "* Когда невозможно заранее спроектировать модель использования (или лично вы не умеете проектировать).\n",
    "    * Недостаточная или избыточная нормализация"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Практика"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Создание схемы данных"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### SQLite"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Для создания реляционной БД необходимо вначале описать схему, в которой определим будут определены таблицы с колонками, типами данных колонок и отношениями между ними."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T11:45:51.931191Z",
     "start_time": "2018-11-06T11:45:51.890524Z"
    }
   },
   "outputs": [],
   "source": [
    "cursor.execute(\"\"\"\n",
    "    CREATE TABLE Authors(\n",
    "        id TEXT PRIMARY KEY UNIQUE NOT NULL,\n",
    "        name TEXT,\n",
    "        region TEXT,\n",
    "        gender TEXT,\n",
    "        age INTEGER,\n",
    "        city TEXT,\n",
    "        stage TEXT\n",
    "    )\"\"\")\n",
    "\n",
    "\n",
    "cursor.execute(\"\"\"\n",
    "    CREATE TABLE Texts(\n",
    "       id INTEGER PRIMARY KEY UNIQUE NOT NULL,\n",
    "       raw TEXT,\n",
    "       lemm TEXT,\n",
    "       url TEXT,\n",
    "       datetime TEXT,\n",
    "       author TEXT,\n",
    "       title TEXT,\n",
    "       stage TEXT,\n",
    "       FOREIGN KEY (author) REFERENCES Authors (id) ON DELETE CASCADE ON UPDATE CASCADE\n",
    "    )\"\"\")\n",
    "\n",
    "\n",
    "cursor.execute(\"\"\"\n",
    "    CREATE TABLE Ethnonyms(\n",
    "        id TEXT PRIMARY KEY UNIQUE NOT NULL\n",
    "    )\"\"\")\n",
    "\n",
    "\n",
    "cursor.execute(\"\"\"\n",
    "    CREATE TABLE Assessors(\n",
    "       id TEXT PRIMARY KEY UNIQUE NOT NULL\n",
    "    )\"\"\")\n",
    "\n",
    "\n",
    "cursor.execute(\"\"\"\n",
    "    CREATE TABLE Ethnonyms_Texts(\n",
    "        text_id INTEGER NOT NULL,\n",
    "        ethnonym_id TEXT NOT NULL,\n",
    "        PRIMARY KEY(ethnonym_id, text_id),\n",
    "        FOREIGN KEY(ethnonym_id) REFERENCES Ethnonyms(id) ON DELETE CASCADE ON UPDATE CASCADE,\n",
    "        FOREIGN KEY(text_id) REFERENCES Texts(id) ON DELETE CASCADE ON UPDATE CASCADE\n",
    "    )\"\"\")\n",
    "\n",
    "\n",
    "cursor.execute(\"\"\"\n",
    "    CREATE TABLE Assessors_Ethnonyms_Texts(\n",
    "        text_id INTEGER NOT NULL,\n",
    "        ethnonym_id TEXT NOT NULL,\n",
    "        assessor_id TEXT NOT NULL,\n",
    "        about_whole_nation_recoded INTEGER,\n",
    "        encourage_aggression_meaning INTEGER,\n",
    "        is_ethicity_aggressor_meaning INTEGER,\n",
    "        is_ethicity_dangerous_meaning INTEGER,\n",
    "        is_ethicity_superior_meaning INTEGER,\n",
    "        opinion_about_ethnonym_recoded INTEGER,\n",
    "        represent_ethicity_meaning INTEGER,\n",
    "        FOREIGN KEY (text_id) REFERENCES Texts (id) ON DELETE CASCADE ON UPDATE CASCADE,\n",
    "        FOREIGN KEY (assessor_id) REFERENCES Assessors (id) ON DELETE CASCADE ON UPDATE CASCADE,\n",
    "        FOREIGN KEY (ethnonym_id) REFERENCES Ethnonyms (id) ON DELETE CASCADE ON UPDATE CASCADE,\n",
    "        PRIMARY KEY (text_id, ethnonym_id, assessor_id)\n",
    "  )\"\"\")\n",
    "\n",
    "cursor.execute(\"\"\"\n",
    "    CREATE TABLE IF NOT EXISTS Assessors_Texts(\n",
    "        text_id INTEGER NOT NULL,\n",
    "        assessor_id TEXT NOT NULL,\n",
    "        do_text_make_sense INTEGER,\n",
    "        has_eth_conflict INTEGER,\n",
    "        has_ethnonym  INTEGER,\n",
    "        has_pos_eth_interaction  INTEGER,\n",
    "        has_topic_culture  INTEGER,\n",
    "        has_topic_daily_routine  INTEGER,\n",
    "        has_topic_economics  INTEGER,\n",
    "        has_topic_ethicity  INTEGER,\n",
    "        has_topic_history  INTEGER,\n",
    "        has_topic_humour  INTEGER,\n",
    "        has_topic_migration  INTEGER,\n",
    "        has_topic_other  INTEGER,\n",
    "        has_topic_politics  INTEGER,\n",
    "        has_topic_religion  INTEGER,\n",
    "        has_topic_society  INTEGER,\n",
    "        is_text_neg  INTEGER,\n",
    "        is_text_positive  INTEGER,\n",
    "        FOREIGN KEY (text_id) REFERENCES Texts (id) ON DELETE CASCADE ON UPDATE CASCADE,\n",
    "        FOREIGN KEY (assessor_id) REFERENCES Assessors (id) ON DELETE CASCADE ON UPDATE CASCADE,\n",
    "        PRIMARY KEY (text_id, assessor_id)\n",
    "  )\"\"\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Для облегчения понимания:\n",
    "* [Руководство по проектированию реляционных баз данных (1-3 часть из 15) [перевод]](https://habr.com/post/193136/)\n",
    "* [Полиморфные связи для самых маленьких](https://habr.com/post/261835/)\n",
    "\n",
    "А для тех, кто хочет окунуться в теории реляционных баз полностью — добро пожаловать [на курс на Степике](https://stepik.org/course/3203/syllabus).\n",
    "\n",
    "\n",
    "В результате получаем такую структуру\n",
    "![](img/shema.png)\n",
    "Создано при помощи [Dbeaver](https://dbeaver.io/)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## MongoDB\n",
    "Не требуется."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Pandas DataFrame\n",
    "Не требуется."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Подключение к СУБД"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### SQLite"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T11:46:05.554757Z",
     "start_time": "2018-11-06T11:46:05.546446Z"
    }
   },
   "outputs": [],
   "source": [
    "### Импортируем библиотеку, соответствующую типу нашей базы данных \n",
    "import sqlite3\n",
    "\n",
    "connection = sqlite3.connect('data/ethno.db')\n",
    "connection.execute(\"PRAGMA foreign_keys = ON\")\n",
    "cursor = connection.cursor()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "В конце необходимо будет выполнить `connection.commit()` чтобы воплотить изменения и `connection.close()` чтобы закрыть соединение."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### MongoDB"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```mongodb://<dbuser>:<dbpassword>@ds024548.mlab.com:24548/hse```"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:18:42.665082Z",
     "start_time": "2018-11-06T12:18:42.489417Z"
    }
   },
   "outputs": [],
   "source": [
    "from pymongo import MongoClient\n",
    "import urllib.parse\n",
    "\n",
    "username = urllib.parse.quote_plus('student')\n",
    "password = urllib.parse.quote_plus('student1')\n",
    "connection_url = 'mongodb://{}:{}@ds024548.mlab.com:24548/hse'.format(username, password)\n",
    "\n",
    "client = MongoClient(connection_url)\n",
    "db = client.hse\n",
    "collection = db.test"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Pandas DataFrame"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 94,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:58:12.035430Z",
     "start_time": "2018-11-06T12:58:12.032253Z"
    }
   },
   "outputs": [],
   "source": [
    "import pandas as pd"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 74,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:47:25.339081Z",
     "start_time": "2018-11-06T12:47:25.266724Z"
    }
   },
   "outputs": [],
   "source": [
    "df = pd.read_msgpack(\"data/ethno_df.msgpack\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Создание выборки данных\n",
    "\n",
    "Давайте сделаем выборку 10-и текстов из каждой системы хранения — SQLite, MongoDB и Pandas Dataframe. Отобразим всю информацию об авторах текстов, сам текст и время его написания. Причем, зададим условия, что нам нужны только лишь тексты пользователей из Москвы и СПб возраста старше 24 лет."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### SQLite\n",
    "\n",
    "Базовый синтаксис такой\n",
    "```\n",
    "SELECT column1, column2 ..., columnN FROM table_name WHERE condition;\n",
    "```\n",
    "Подробнее здесь:\n",
    "* [Как думать на SQL?](https://habr.com/post/305926/)\n",
    "* [JOIN на Wiki](https://ru.wikipedia.org/wiki/Join_(SQL))\n",
    "* [An Illustrated Guide to Multiple Join](https://academy.vertabelo.com/blog/illustrated-guide-multiple-join/)\n",
    "<img src=\"https://i.pinimg.com/736x/b0/3d/67/b03d6794fb787492bea0f41a8144a37d--business-intelligence-computer-science.jpg\" width=\"400\">"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:06:31.860783Z",
     "start_time": "2018-11-06T12:06:31.857007Z"
    }
   },
   "outputs": [],
   "source": [
    "sql_query = '''\n",
    "SELECT\n",
    "    Texts.datetime,\n",
    "    Texts.raw,\n",
    "    Authors.region,\n",
    "    Authors.age,\n",
    "    Authors.gender\n",
    "FROM Texts\n",
    "LEFT JOIN Authors ON Authors.id = Texts.author\n",
    "WHERE Authors.region IN ('Москва', 'Санкт-Петербург')\n",
    "    AND Authors.age >= 25\n",
    "LIMIT 10\n",
    "'''"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:06:32.048732Z",
     "start_time": "2018-11-06T12:06:32.028535Z"
    }
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "('2014-01-07 15:48:00',\n",
       " 'Холокост с обратной стороны. Литовский политик призвал Израиль платить литовцам за спасение <b>евреев</b> » Москва - Третий Рим',\n",
       " 'Москва',\n",
       " 55,\n",
       " 'Женщина')"
      ]
     },
     "execution_count": 19,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "cursor.execute(sql_query).fetchone() # fetchall() для всех записей"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 40,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T07:21:20.161967Z",
     "start_time": "2018-11-06T07:21:20.145193Z"
    }
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>datetime</th>\n",
       "      <th>raw</th>\n",
       "      <th>region</th>\n",
       "      <th>age</th>\n",
       "      <th>gender</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2014-01-07 15:48:00</td>\n",
       "      <td>Холокост с обратной стороны. Литовский политик...</td>\n",
       "      <td>Москва</td>\n",
       "      <td>55</td>\n",
       "      <td>Женщина</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2014-02-27 17:37:55</td>\n",
       "      <td>Степан, бот ты все не угомонишься? как то вас ...</td>\n",
       "      <td>Санкт-Петербург</td>\n",
       "      <td>36</td>\n",
       "      <td>Мужчина</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2014-02-28 02:07:42</td>\n",
       "      <td>Сергей, в Крыму уже находятся 76-я десантно-шт...</td>\n",
       "      <td>Санкт-Петербург</td>\n",
       "      <td>28</td>\n",
       "      <td>Мужчина</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2014-05-05 23:33:46</td>\n",
       "      <td>Друзья всем советую смотреть &lt;b&gt;кыргыз&lt;/b&gt; кин...</td>\n",
       "      <td>Москва</td>\n",
       "      <td>1945</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2014-06-06 15:38:00</td>\n",
       "      <td>Инкубатор &lt;b&gt;пархатых&lt;/b&gt; это Россия. По нашей...</td>\n",
       "      <td>Москва</td>\n",
       "      <td>66</td>\n",
       "      <td>Мужчина</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>2014-12-02 15:48:04</td>\n",
       "      <td>нормально все ходит. я через банк фк открытие ...</td>\n",
       "      <td>Санкт-Петербург</td>\n",
       "      <td>28</td>\n",
       "      <td>Мужчина</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>2014-12-11 17:06:12</td>\n",
       "      <td>В США полицейский застрелил безоружного &lt;b&gt;афр...</td>\n",
       "      <td>Москва</td>\n",
       "      <td>33</td>\n",
       "      <td>Женщина</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>2015-01-12 21:06:57</td>\n",
       "      <td>Симферополь.Памятник братьям Айвазовским - Ива...</td>\n",
       "      <td>Санкт-Петербург</td>\n",
       "      <td>1945</td>\n",
       "      <td>Мужчина</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>2015-01-12 21:06:57</td>\n",
       "      <td>Симферополь.Памятник братьям Айвазовским - Ива...</td>\n",
       "      <td>Санкт-Петербург</td>\n",
       "      <td>1945</td>\n",
       "      <td>Мужчина</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>2015-01-15 16:31:18</td>\n",
       "      <td>[[id65482402|Эдик], что ты несешь, дурашка? Ес...</td>\n",
       "      <td>Санкт-Петербург</td>\n",
       "      <td>31</td>\n",
       "      <td>Мужчина</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "              datetime                                                raw  \\\n",
       "0  2014-01-07 15:48:00  Холокост с обратной стороны. Литовский политик...   \n",
       "1  2014-02-27 17:37:55  Степан, бот ты все не угомонишься? как то вас ...   \n",
       "2  2014-02-28 02:07:42  Сергей, в Крыму уже находятся 76-я десантно-шт...   \n",
       "3  2014-05-05 23:33:46  Друзья всем советую смотреть <b>кыргыз</b> кин...   \n",
       "4  2014-06-06 15:38:00  Инкубатор <b>пархатых</b> это Россия. По нашей...   \n",
       "5  2014-12-02 15:48:04  нормально все ходит. я через банк фк открытие ...   \n",
       "6  2014-12-11 17:06:12  В США полицейский застрелил безоружного <b>афр...   \n",
       "7  2015-01-12 21:06:57  Симферополь.Памятник братьям Айвазовским - Ива...   \n",
       "8  2015-01-12 21:06:57  Симферополь.Памятник братьям Айвазовским - Ива...   \n",
       "9  2015-01-15 16:31:18  [[id65482402|Эдик], что ты несешь, дурашка? Ес...   \n",
       "\n",
       "            region   age   gender  \n",
       "0           Москва    55  Женщина  \n",
       "1  Санкт-Петербург    36  Мужчина  \n",
       "2  Санкт-Петербург    28  Мужчина  \n",
       "3           Москва  1945     None  \n",
       "4           Москва    66  Мужчина  \n",
       "5  Санкт-Петербург    28  Мужчина  \n",
       "6           Москва    33  Женщина  \n",
       "7  Санкт-Петербург  1945  Мужчина  \n",
       "8  Санкт-Петербург  1945  Мужчина  \n",
       "9  Санкт-Петербург    31  Мужчина  "
      ]
     },
     "execution_count": 40,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "pd.read_sql(sql=sql_query, con=connection)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### MongoDB"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Операторы запросов: https://docs.mongodb.com/manual/reference/operator/query/"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 31,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T07:04:46.466220Z",
     "start_time": "2018-11-06T07:04:46.368670Z"
    }
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "{'_id': ObjectId('5be13351732ce962ac47d397'), 'raw': 'Холокост с обратной стороны. Литовский политик призвал Израиль платить литовцам за спасение <b>евреев</b> » Москва - Третий Рим', 'datetime': '2014-01-07 15:48:00', 'author': {'id': 'id139424985', 'region': 'Москва', 'city': 'Москва', 'gender': 'Женщина', 'age': 55.0}}\n",
      "{'_id': ObjectId('5be13353732ce962ac47d3a9'), 'raw': 'Степан, бот ты все не угомонишься? как то вас плохо готовят. Может расскажешь нам про еще про <b><font color=\"#41A317\">довольных</font></b> индейцев, <b>аборигенов</b> Австралии, африканских <b>туземцев</b> которым Запад принес свою цивилизацию? У нас вот в России все национальности равны, и якуты, буряты и т.д читать и писать умеют, причем даже на своем языке.Может расскажешь последним 500 австралийцам, какая Россия тюрьма народов.', 'datetime': '2014-02-27 17:37:55', 'author': {'id': 'id3756501', 'region': 'Санкт-Петербург', 'city': 'Санкт-Петербург', 'gender': 'Мужчина', 'age': 36.0}}\n",
      "{'_id': ObjectId('5be13353732ce962ac47d3aa'), 'raw': 'Сергей, в Крыму уже находятся 76-я десантно-штурмовая дивизия ВДВ, 31-я десантно штурмовая бригада ВДВ и бригада спецназа ГРУ. По твоему они зря деньги на топливо тратили? В Крыму живут русские, они в любом случае за Россию проголосуют. Наша задача просто проконтролировать, чтобы в Крым <b>инородцы</b> не сунулись до голосования', 'datetime': '2014-02-28 02:07:42', 'author': {'id': 'id333966', 'region': 'Санкт-Петербург', 'city': 'Санкт-Петербург', 'gender': 'Мужчина', 'age': 28.0}}\n",
      "{'_id': ObjectId('5be13355732ce962ac47d3c6'), 'raw': 'Друзья всем советую смотреть <b>кыргыз</b> кино \\\\ кыз жигит\\\\', 'datetime': '2014-05-05 23:33:46', 'author': {'id': 'hApPy aNgEl', 'region': 'Москва', 'city': 'Москва', 'gender': None, 'age': 1945.0}}\n",
      "{'_id': ObjectId('5be13355732ce962ac47d3cf'), 'raw': 'Инкубатор <b>пархатых</b> это Россия. По нашей глупости и безмозглости, они здесь плодятся и живут...как глисты, в организме здорового человека. Стоит принять слабительное (Сталин)...и их понесло на обетованную и не только...потом они возвращаются. А мы все хиреем и хиреем. Спасибо за интернет. Многие поймут многое. А поймут, значит перекос будет исправлен. Хочется верить в это...перед смертью.', 'datetime': '2014-06-06 15:38:00', 'author': {'id': 'id201470753', 'region': 'Москва', 'city': 'Москва', 'gender': 'Мужчина', 'age': 66.0}}\n",
      "{'_id': ObjectId('5be13358732ce962ac47d3fa'), 'raw': 'нормально все ходит. я через банк фк открытие (номос) работаю. это косяки с реорганизацией… открытия и <b>хантов</b>', 'datetime': '2014-12-02 15:48:04', 'author': {'id': 'atialloy', 'region': 'Санкт-Петербург', 'city': 'Санкт-Петербург', 'gender': 'Мужчина', 'age': 28.0}}\n",
      "{'_id': ObjectId('5be13359732ce962ac47d3fe'), 'raw': 'В США полицейский застрелил безоружного <b>афроамериканца</b>\\r<br/> В конце ноября в США прошли массовые акции протеста после того, как коллегия присяжных вынесла оправдательный вердикт по делу Даррена Уилсона, полицейского из Фергюсона, который в августе застрелил безоружного <b>афроамериканца</b> Майкла Брауна.', 'datetime': '2014-12-11 17:06:12', 'author': {'id': 'id240088822', 'region': 'Москва', 'city': 'Москва', 'gender': 'Женщина', 'age': 33.0}}\n",
      "{'_id': ObjectId('5be13359732ce962ac47d408'), 'raw': 'Симферополь.Памятник братьям Айвазовским - Ивану и Габриэлю находится в сквере имени Дыбенко рядом с площадью Советской.\\\\nАйвазовский Иван Константинович был русским живописцем, почетным членом Петербургской академии художеств. В 1880-м году он основал в Феодосии картинную галерею, которую впоследствии со всеми своими произведениями завещал городу.\\\\nСтарший брат Ивана Константиновича – Габриэль Константинович Айвазовский был известным просветителем <b>армянского</b> <b>народа</b>, педагогом, ученым-востоковедом и талантливейшим писателем.\\\\nПамятник был установлен по инициативе армянского национального общества Крыма «Луис».\\\\nК стыду своему', 'datetime': '2015-01-12 21:06:57', 'author': {'id': 'Fil26', 'region': 'Санкт-Петербург', 'city': 'Санкт-Петербург', 'gender': 'Мужчина', 'age': 1945.0}}\n",
      "{'_id': ObjectId('5be1335a732ce962ac47d409'), 'raw': 'Симферополь.Памятник братьям Айвазовским - Ивану и Габриэлю находится в сквере имени Дыбенко рядом с площадью Советской.\\\\nАйвазовский Иван Константинович был русским живописцем, почетным членом Петербургской академии художеств. В 1880-м году он основал в Феодосии картинную галерею, которую впоследствии со всеми своими произведениями завещал городу.\\\\nСтарший брат Ивана Константиновича – Габриэль Константинович Айвазовский был известным просветителем <b>армянского</b> <b>народа</b>, педагогом, ученым-востоковедом и талантливейшим писателем.\\\\nПамятник был установлен по инициативе армянского национального общества Крыма «Луис».\\\\nК стыду своему не знал, что Айвазовский армянин и ч', 'datetime': '2015-01-12 21:06:57', 'author': {'id': 'Fil26', 'region': 'Санкт-Петербург', 'city': 'Санкт-Петербург', 'gender': 'Мужчина', 'age': 1945.0}}\n",
      "{'_id': ObjectId('5be1335a732ce962ac47d40d'), 'raw': '[[id65482402|Эдик], что ты несешь, дурашка? Если в японскую деревню подселить одного зулуса и двух таджиков, Япония от этого многонациональной страной не станет, как бы тебе этого не хотелось в твоих влажных либерашкомечтах. Воевали в подавляющем большинстве русские, украинцы, беларусы и татары. Потому что каквказцы, крымские татары и среднеазиаты были любителями немножко поубивать русских за старые обидки за противоположную сторону при первой же возможности. Хотя чаще всего они просто уклонялись, да и в подавляющем большинстве к службе были непригодны. Или ты считаешь, что узбекский хлебороб, подкармливающий армию, внес соразмерный вклад в победу с ребятами из Сталинграда? И запомни, сосунок, это на наших плечах живут \"гастрики\", а не наоборот. Хотя лично тебе я искренне желаю получить в пузо толерантный гасторбайтерский нож за твой говноайфон. Накорми несчастных <b>азиатов</b> лично, мразота <b><font color=\"#E42217\">тупорылая</font></b>. Покажи нам пример дружбы народов!', 'datetime': '2015-01-15 16:31:18', 'author': {'id': 'id58547406', 'region': 'Санкт-Петербург', 'city': 'Санкт-Петербург', 'gender': 'Мужчина', 'age': 31.0}}\n"
     ]
    }
   ],
   "source": [
    "for doc in collection.find({\n",
    "        \"author.region\" : {\"$in\": [\"Москва\", \"Санкт-Петербург\"]},\n",
    "        \"author.age\": {\"$gte\": 25}\n",
    "    },\n",
    "    {\"author\": 1, \"datetime\": 1, \"raw\": 1}).limit(10):\n",
    "    print(doc)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Pandas DF"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 95,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T13:01:07.617873Z",
     "start_time": "2018-11-06T13:01:07.615271Z"
    }
   },
   "outputs": [],
   "source": [
    "# наишите сами"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Удаление данных"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Удалим из базы записи, которые связаны с текстами про русских (это слово может быть прилагательным и указывать не только на этноним)."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T13:26:14.829232Z",
     "start_time": "2018-11-06T13:26:14.818217Z"
    }
   },
   "source": [
    "### SQlite"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Да практически также, как и выборка, только `SELECT` меняем на `DELETE` и не указываем колонки."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 98,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T13:40:33.006917Z",
     "start_time": "2018-11-06T13:40:32.989093Z"
    }
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "<sqlite3.Cursor at 0x111fbff80>"
      ]
     },
     "execution_count": 98,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "sql_remove = '''\n",
    "DELETE FROM Ethnonyms WHERE id = 'русский'\n",
    "'''\n",
    "cursor.execute(sql_remove) # fetchall() для всех записей"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 104,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T13:43:46.847914Z",
     "start_time": "2018-11-06T13:43:46.840746Z"
    }
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[]"
      ]
     },
     "execution_count": 104,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "cursor.execute(\"SELECT * FROM Ethnonyms_Texts WHERE ethnonym_id = 'русский'\").fetchall()\n",
    "# connection.commit() # пока не будет выполнена эта строка, изменения не будут внесены."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Обращайте внимание на возможнось каскадного удаления (см. [Руководство по проектированию реляционных баз данных. Каскадное удаление данных](https://habr.com/post/194738/)). Оно нужно, чтобы сохранить ссылочную целостность.\n",
    "\n",
    "Ссылочная целостность может нарушиться) в следующих случаях:\n",
    "\n",
    "* обновляется внешний ключ (ссылка на идентификатор в таблице категорий) в строке-потомке.\n",
    "* добавляется новая строка-потомок. Добавляем новую вещь, а она не принадлежит ни одной категории.\n",
    "* удаление строки-предка.\n",
    "* обновление первичного ключа в строке-предке.\n",
    "\n",
    "Средства поддержания ссылочной целостности SQL позволяют обрабатывать указанные случаи."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### MongoDB"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "collection.delete_many(query) # где query — это такой же запрос как с find\n",
    "# делать это мы не будет, посколько это сможет сделать только один человек"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T13:26:42.104984Z",
     "start_time": "2018-11-06T13:26:42.101315Z"
    }
   },
   "source": [
    "### Pandas DataFrame"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "#"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Изменение данных"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T13:26:14.829232Z",
     "start_time": "2018-11-06T13:26:14.818217Z"
    }
   },
   "source": [
    "### SQlite"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### MongoDB"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T13:26:42.104984Z",
     "start_time": "2018-11-06T13:26:42.101315Z"
    }
   },
   "source": [
    "### Pandas DataFrame"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Полнотекстовый поиск"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### В SQL"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Есть два способа осуществить поиск по строке в SQLite. Первый — медленный, но простой. Второй — быстрый, но немного сложнее.\n",
    "\n",
    "Начнём в первого — можно использовать оператор [`LIKE`](http://www.sqlitetutorial.net/sqlite-like/), который найдёт строки, похожие на шаблон. Он регистрозависимый."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 71,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:43:19.479130Z",
     "start_time": "2018-11-06T12:43:19.469311Z"
    }
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[(783509151,\n",
       "  'Да нам-то вы нах не вперлись. Извините. У нас земли с перебором. На 100 поколений хватит. В Вас проблема. Не обижали бы вы Русских, проблем бы не было бы. Первый закон после переворота какой Рада приняла? Об отмене статуса Русского языка. Ваши <b>западенцы</b> понаехали на Донбасс мгновенно. Вы че? Вы, действительно, думаете, что Русские - рабы? Да вы заебетесь пизды огребаться! Не на тех нарвались! Это Россия.',\n",
       "  None,\n",
       "  'http://vk.com/wall217372490_1879',\n",
       "  '2015-02-28 17:53:23',\n",
       "  'id181542797',\n",
       "  None)]"
      ]
     },
     "execution_count": 71,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "cursor.execute(\"SELECT * FROM Texts WHERE raw LIKE '%Вы че%'\").fetchall()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Также в SQLite существует возможность выстрого полнотекстового поиска, но для этого надо немного поплясать с бубном.\n",
    "\n",
    "Во-первых, необходимо создать виртуальную [FTS-таблицу](https://www.sqlite.org/fts3.html). Назовём её fts_table:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:31:20.045728Z",
     "start_time": "2018-11-06T12:31:20.032544Z"
    }
   },
   "outputs": [],
   "source": [
    "cursor.execute(\"CREATE VIRTUAL TABLE fts_table USING fts5 ( id, raw )\");"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Во-вторых, необходимо наполнить её значениями. В данном случае, мы просто скопируем в неё колонки id, raw из таблицы Texts:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:05:20.516591Z",
     "start_time": "2018-11-06T12:05:20.464237Z"
    }
   },
   "outputs": [],
   "source": [
    "cursor.execute(\"INSERT INTO fts_table SELECT id, raw FROM Texts\");"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:14:15.034145Z",
     "start_time": "2018-11-06T12:14:15.020970Z"
    }
   },
   "source": [
    "И только затем мы можем производить поиск при помощи ключевого слова `MATCH`:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 49,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:32:35.826462Z",
     "start_time": "2018-11-06T12:32:35.820386Z"
    }
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[(783509151,\n",
       "  'Да нам-то вы нах не вперлись. Извините. У нас земли с перебором. На 100 поколений хватит. В Вас проблема. Не обижали бы вы Русских, проблем бы не было бы. Первый закон после переворота какой Рада приняла? Об отмене статуса Русского языка. Ваши <b>западенцы</b> понаехали на Донбасс мгновенно. Вы че? Вы, действительно, думаете, что Русские - рабы? Да вы заебетесь пизды огребаться! Не на тех нарвались! Это Россия.')]"
      ]
     },
     "execution_count": 49,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "cursor.execute(\"SELECT * FROM fts_table WHERE raw MATCH 'вы че'\").fetchall()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Уффф...\n",
    "Это только начало, [другие БД предоставляют более богатые возможности и более сложный синтаксис](https://habr.com/post/40218/). Изучать его мы, конечно, не будем."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### В MongoDB\n",
    "Тут всё немного проще благодаря оператору [`$text`](https://docs.mongodb.com/manual/reference/operator/query/text/). Единственная неочевидная вещь, которую требуется сделать — это создать текстовый индекс на том поле, по которому вы будете искать. Ну хоть не таблицу."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:22:04.749418Z",
     "start_time": "2018-11-06T12:22:04.509791Z"
    }
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'raw_text'"
      ]
     },
     "execution_count": 30,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "collection.create_index([('raw', 'text')])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 69,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:40:01.443213Z",
     "start_time": "2018-11-06T12:40:01.375479Z"
    }
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "\"'Да нам-то вы нах не вперлись. Извините. У нас земли с перебором. На 100 поколений хватит. В Вас проблема. Не обижали бы вы Русских, проблем бы не было бы. Первый закон после переворота какой Рада приняла? Об отмене статуса Русского языка. Ваши <b>западенцы</b> понаехали на Донбасс мгновенно. Вы че? Вы, действительно, думаете, что Русские - рабы? Да вы заебетесь пизды огребаться! Не на тех нарвались! Это Россия.'\""
      ]
     },
     "execution_count": 69,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "repr(collection.find_one({ \"$text\" : { \"$search\" : \"вы че\" }})[\"raw\"])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 39,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:26:37.188052Z",
     "start_time": "2018-11-06T12:26:37.115373Z"
    }
   },
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/ipykernel_launcher.py:1: DeprecationWarning: count is deprecated. Use Collection.count_documents instead.\n",
      "  \"\"\"Entry point for launching an IPython kernel.\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "48"
      ]
     },
     "execution_count": 39,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "collection.find({ \"$text\" : { \"$search\" : \"вы че\" }}).count()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### В Pandas \n",
    "также существую [обширные возможности для работы с текстом](https://pandas.pydata.org/pandas-docs/stable/text.html)."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 93,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:53:16.534249Z",
     "start_time": "2018-11-06T12:53:16.523852Z"
    }
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "652     Да нам-то вы нах не вперлись. Извините. У нас ...\n",
       "839     Да нам-то вы нах не вперлись. Извините. У нас ...\n",
       "1114    Да нам-то вы нах не вперлись. Извините. У нас ...\n",
       "1214    Да нам-то вы нах не вперлись. Извините. У нас ...\n",
       "2334    Да нам-то вы нах не вперлись. Извините. У нас ...\n",
       "2512    Да нам-то вы нах не вперлись. Извините. У нас ...\n",
       "Name: raw, dtype: object"
      ]
     },
     "execution_count": 93,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df[df.raw.str.contains(\"Вы че\")].raw"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 90,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T12:52:37.122293Z",
     "start_time": "2018-11-06T12:52:37.108178Z"
    }
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "6"
      ]
     },
     "execution_count": 90,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df.raw.str.contains(\"Вы че\").sum()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Самостоятельная \n",
    "Сделайте следующие задания в каждой системе хранения данных:\n",
    "* Загрузите 10 первых записей с информацией об авторах из каждой системы (поле \"author\" в mongodb, таблица \"author\" в SQLite, колонки author, region, city, gender, age в DF).\n",
    "* Найдите тексты, в которых упоминаются этнические группы 'татары' и 'русские'. Сколько таких текстов?\n",
    "* В Pandas и SQL найте все тексты, в написанные мужчинами младше 20 лет. Кто в них чаще упоминается? В SQL используйте GROUP BY"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 41,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T07:21:43.789436Z",
     "start_time": "2018-11-06T07:21:43.785684Z"
    }
   },
   "outputs": [],
   "source": [
    "sql_group = '''\n",
    "SELECT\n",
    "    Authors.region,\n",
    "    COUNT(*) AS `num`\n",
    "FROM Texts\n",
    "LEFT JOIN Authors ON Authors.id = Texts.author\n",
    "WHERE Authors.region IN ('Москва', 'Санкт-Петербург')\n",
    "    AND Authors.age >= 25\n",
    "GROUP BY Authors.region\n",
    "'''"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Существует немало [других функций](https://www.sqlite.org/lang_aggfunc.html) для работы с аггрегированными данными помимо COUNT.\n",
    "\n",
    "* Создайте из SQLite базы таблицу, которая будет похожа таковую из Pandas DataFrame. В ней должна содержаться вообще вся информация — какой текст написал какой автор, какие этнические"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 105,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2018-11-06T14:14:40.661641Z",
     "start_time": "2018-11-06T14:14:40.635264Z"
    }
   },
   "outputs": [],
   "source": [
    "connection.close()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.5"
  },
  "toc": {
   "nav_menu": {},
   "number_sections": true,
   "sideBar": true,
   "skip_h1_title": false,
   "toc_cell": true,
   "toc_position": {},
   "toc_section_display": "block",
   "toc_window_display": true
  },
  "varInspector": {
   "cols": {
    "lenName": 16,
    "lenType": 16,
    "lenVar": 40
   },
   "kernels_config": {
    "python": {
     "delete_cmd_postfix": "",
     "delete_cmd_prefix": "del ",
     "library": "var_list.py",
     "varRefreshCmd": "print(var_dic_list())"
    },
    "r": {
     "delete_cmd_postfix": ") ",
     "delete_cmd_prefix": "rm(",
     "library": "var_list.r",
     "varRefreshCmd": "cat(var_dic_list()) "
    }
   },
   "types_to_exclude": [
    "module",
    "function",
    "builtin_function_or_method",
    "instance",
    "_Feature"
   ],
   "window_display": false
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
